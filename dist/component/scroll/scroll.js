define("component/scroll/scroll",["gallery/iscroll/iscroll-probe.js"],function(a,b){b.init=function(b){var c,d,e,f,g,h,i,j,k=a("gallery/iscroll/iscroll-probe.js"),l=0,m=0;return d={page:null,selector:"",refreshUrl:"",pullDownHeight:50,enableRefresh:!0,enableLoadmore:!0},e=$.extend(!0,{},d,b),g=$(e.selector),h=g.find(".j-loadmore"),i=g.find(".j-pullDown"),j=g.find(".j-pullDown-helper"),f=parseInt(g.find(".j-hasData").val()),c=new k(e.selector,{click:!0,tap:!0,mouseWheel:!0,scrollbars:!0,probeType:2}),e.enableRefresh||e.enableLoadmore?(e.enableRefresh&&c.on("scroll",function(){m||(this.y<e.pullDownHeight&&j.height(this.y),l=this.y,this.y>e.pullDownHeight&&!i.hasClass("flip")?(i.addClass("flip"),i.text("释放立即刷新...")):this.y<e.pullDownHeight&&i.hasClass("flip")&&(i.removeClass("flip"),i.text("下拉刷新...")))}),c.on("scrollEnd",function(){e.enableLoadmore&&f&&this.y-50<=this.maxScrollY&&0!=this.y&&setTimeout(function(){var a="<li>新增内容</li><li>新增内容</li><li>新增内容</li><li>新增内容</li><li>新增内容</li>";g.find(".comm-list").append(a),c.refresh()},1e3),l<e.pullDownHeight&&!m&&j.animate({height:0},100),e.enableRefresh&&i.hasClass("flip")&&!m&&(m=1,i.addClass("pulldown-loading"),i.text("正在刷新..."),g.find(".j-refreshPanel").load(e.refreshUrl,function(a,b){var d="";d="success"==b?"刷新成功":"刷新失败，请重试",i.text(d),setTimeout(function(){j.animate({height:0},100),i.removeClass("pulldown-loading"),c.refresh(),m=0},500)}))}),c):void 0}});