define("js/module/message",["component/search/search"],function(a,b){b.init=function(b){var c=$(b);a("component/search/search").init(b);var d=new IScroll(".content",iScroll_config),e=c.find(".j-loadmore"),f=c.find(".j-pullDown");d.on("scroll",function(){this.y>50&&!f.hasClass("flip")?(f.addClass("flip"),f.text("释放立即刷新..."),f.css("paddingTop",this.y)):this.y<50&&f.hasClass("flip")&&(f.removeClass("flip"),f.text("下拉刷新..."),f.css("paddingTop",0))}),d.on("scrollEnd",function(){this.y-50<=this.maxScrollY&&0!=this.y&&(e.css("opacity",1),setTimeout(function(){var a="<li>新增内容</li><li>新增内容</li><li>新增内容</li><li>新增内容</li><li>新增内容</li>";c.find(".j-msgTabPn.pn1 ul").append(a),d.refresh(),e.css("opacity",0)},1e3)),f.hasClass("flip")&&(f.addClass("pulldown-loading"),f.text("正在刷新..."),setTimeout(function(){f.text("刷新成功"),setTimeout(function(){f.css("paddingTop",0),f.removeClass("pulldown-loading"),d.refresh()},1e3)},1e3))}),$(".header .j-msgTab").click(function(){var a=$(this).data("panel");$(this).addClass("active").siblings(".j-msgTab").removeClass("active"),c.find(".content .j-msgTabPn").each(function(){$(this).hasClass(a)&&$(this).show().siblings(".j-msgTabPn").hide()}),setTimeout(function(){d.refresh()},0)})}});